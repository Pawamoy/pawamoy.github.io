


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Findings, thoughts, tutorials, work. Pieces of my mind!">
      
      
        <link rel="canonical" href="https://pawamoy.github.io/posts/docker-compose-django-postgres-nginx/">
      
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.12">
    
    
      
        <title>Docker Compose with NginX, Django, Gunicorn and multiple Postgres databases - pawamoy's website</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.4dd2dd8d.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.6a5ad368.min.css">
      
      
        
        
        <meta name="theme-color" content="#009485">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="../../css/custom.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#overview-to-get-a-better-understanding-of-the-whole-thing" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://pawamoy.github.io/" title="pawamoy's website" class="md-header-nav__button md-logo" aria-label="pawamoy's website">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            pawamoy's website
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Docker Compose with NginX, Django, Gunicorn and multiple Postgres databases
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/pawamoy/website/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    pawamoy/website
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
          

  

<nav class="md-tabs md-tabs--active" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../.." class="md-tabs__link">
        Home
      </a>
    
  </li>

      
        
      
        
      
        
  
  
    
    
  
  
    <li class="md-tabs__item">
      
        <a href="../pass-makefile-args-as-typed-in-command-line/" class="md-tabs__link">
          Posts
        </a>
      
    </li>
  

  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../showcase/" class="md-tabs__link">
          Showcase
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://pawamoy.github.io/" title="pawamoy's website" class="md-nav__button md-logo" aria-label="pawamoy's website">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    pawamoy's website
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/pawamoy/website/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    pawamoy/website
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../about/" title="About" class="md-nav__link">
      About
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../credits/" title="Credits" class="md-nav__link">
      Credits
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Posts
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Posts" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon"></span>
        Posts
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-1" type="checkbox" id="nav-4-1">
    
    <label class="md-nav__link" for="nav-4-1">
      2020
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="2020" data-md-level="2">
      <label class="md-nav__title" for="nav-4-1">
        <span class="md-nav__icon md-icon"></span>
        2020
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../pass-makefile-args-as-typed-in-command-line/" title="Passing Makefile arguments to a command, as they are typed in the command line." class="md-nav__link">
      Passing Makefile arguments to a command, as they are typed in the command line.
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../plugins-as-python-native-namespace-packages/" title="Python packages and plugins as namespace packages" class="md-nav__link">
      Python packages and plugins as namespace packages
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../howto-edit-git-commit-contents/" title="How to edit the contents of a git commit" class="md-nav__link">
      How to edit the contents of a git commit
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../migrate-disqus-comments-to-utterances-github/" title="Migrate Disqus comments to Utterances (in GitHub issues) with Python" class="md-nav__link">
      Migrate Disqus comments to Utterances (in GitHub issues) with Python
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../how-to-deal-with-jinja2-spacing/" title="How to deal with spacing in Jinja2 templates" class="md-nav__link">
      How to deal with spacing in Jinja2 templates
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../unify-logging-for-a-gunicorn-uvicorn-app/" title="Unify Python logging for a Gunicorn/Uvicorn/FastAPI application" class="md-nav__link">
      Unify Python logging for a Gunicorn/Uvicorn/FastAPI application
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-2" type="checkbox" id="nav-4-2">
    
    <label class="md-nav__link" for="nav-4-2">
      2019
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="2019" data-md-level="2">
      <label class="md-nav__title" for="nav-4-2">
        <span class="md-nav__icon md-icon"></span>
        2019
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../save-pytest-logs-as-artifact-gitlab-ci/" title="Save the logs generated during a pytest run as a job artifact on GitLab CI" class="md-nav__link">
      Save the logs generated during a pytest run as a job artifact on GitLab CI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../challenge-fill-space-one-line-90-degree-same-direction/" title="Challenge: fill a 2D space with one continuous line doing 90° angle turns in the same direction (left/right)" class="md-nav__link">
      Challenge: fill a 2D space with one continuous line doing 90° angle turns in the same direction (left/right)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-3" type="checkbox" id="nav-4-3" checked>
    
    <label class="md-nav__link" for="nav-4-3">
      2018
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="2018" data-md-level="2">
      <label class="md-nav__title" for="nav-4-3">
        <span class="md-nav__icon md-icon"></span>
        2018
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../django-auth-server-for-shiny/" title="Django application as an authentication / authorization server for Shiny" class="md-nav__link">
      Django application as an authentication / authorization server for Shiny
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../dual-screens-setup-nvidia-bunsenlabs-debian-jessie/" title="How to install NVidia drivers on BunsenLabs/Debian 8 to setup dual screens" class="md-nav__link">
      How to install NVidia drivers on BunsenLabs/Debian 8 to setup dual screens
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Docker Compose with NginX, Django, Gunicorn and multiple Postgres databases
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="./" title="Docker Compose with NginX, Django, Gunicorn and multiple Postgres databases" class="md-nav__link md-nav__link--active">
      Docker Compose with NginX, Django, Gunicorn and multiple Postgres databases
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview-to-get-a-better-understanding-of-the-whole-thing" class="md-nav__link">
    Overview: to get a better understanding of the whole thing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dockerfile-a-simple-django-application-served-by-gunicorn" class="md-nav__link">
    Dockerfile: a simple Django application served by Gunicorn
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pipenv-spice-things-up-with-pipfile-and-pipfilelock" class="md-nav__link">
    Pipenv: spice things up with Pipfile and Pipfile.lock
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compose-add-a-container-for-nginx" class="md-nav__link">
    Compose: add a container for NginX
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compose-add-containers-for-one-or-more-postgres-databases" class="md-nav__link">
    Compose: add containers for one or more Postgres databases
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#static-files-collecting-storing-and-serving" class="md-nav__link">
    Static files: collecting, storing and serving
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources" class="md-nav__link">
    Resources
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-4" type="checkbox" id="nav-4-4">
    
    <label class="md-nav__link" for="nav-4-4">
      2017
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="2017" data-md-level="2">
      <label class="md-nav__title" for="nav-4-4">
        <span class="md-nav__icon md-icon"></span>
        2017
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../python-static-code-analysis-tools/" title="Python static code analysis tools" class="md-nav__link">
      Python static code analysis tools
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-5" type="checkbox" id="nav-4-5">
    
    <label class="md-nav__link" for="nav-4-5">
      2016
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="2016" data-md-level="2">
      <label class="md-nav__title" for="nav-4-5">
        <span class="md-nav__icon md-icon"></span>
        2016
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../write-and-use-a-tox-plugin-from-inside-your-package/" title="Write and use a tox plugin from inside your package" class="md-nav__link">
      Write and use a tox plugin from inside your package
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../documentation-in-your-shell-scripts-using-shellman/" title="Documentation in your shell scripts using shellman" class="md-nav__link">
      Documentation in your shell scripts using shellman
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../django-dashboard-with-suit-and-highcharts/" title="Django admin dashboard with Suit and Highcharts" class="md-nav__link">
      Django admin dashboard with Suit and Highcharts
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Showcase
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Showcase" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon"></span>
        Showcase
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../showcase/" title="Showcase Grid" class="md-nav__link">
      Showcase Grid
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5-2" type="checkbox" id="nav-5-2">
    
    <label class="md-nav__link" for="nav-5-2">
      Projects
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Projects" data-md-level="2">
      <label class="md-nav__title" for="nav-5-2">
        <span class="md-nav__icon md-icon"></span>
        Projects
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../showcase/aria2p/" title="aria2p" class="md-nav__link">
      aria2p
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../showcase/mkdocstrings/" title="mkdocstrings" class="md-nav__link">
      mkdocstrings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../showcase/copier-poetry/" title="copier-poetry" class="md-nav__link">
      copier-poetry
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../showcase/pytkdocs/" title="pytkdocs" class="md-nav__link">
      pytkdocs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../showcase/git-changelog/" title="git-changelog" class="md-nav__link">
      git-changelog
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../showcase/shell-history/" title="shell-history" class="md-nav__link">
      shell-history
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../showcase/failprint/" title="failprint" class="md-nav__link">
      failprint
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../showcase/dependenpy/" title="dependenpy" class="md-nav__link">
      dependenpy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../showcase/mvodb/" title="mvodb" class="md-nav__link">
      mvodb
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../showcase/shelldemo/" title="shelldemo" class="md-nav__link">
      shelldemo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../showcase/shellman/" title="shellman" class="md-nav__link">
      shellman
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview-to-get-a-better-understanding-of-the-whole-thing" class="md-nav__link">
    Overview: to get a better understanding of the whole thing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dockerfile-a-simple-django-application-served-by-gunicorn" class="md-nav__link">
    Dockerfile: a simple Django application served by Gunicorn
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pipenv-spice-things-up-with-pipfile-and-pipfilelock" class="md-nav__link">
    Pipenv: spice things up with Pipfile and Pipfile.lock
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compose-add-a-container-for-nginx" class="md-nav__link">
    Compose: add a container for NginX
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compose-add-containers-for-one-or-more-postgres-databases" class="md-nav__link">
    Compose: add containers for one or more Postgres databases
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#static-files-collecting-storing-and-serving" class="md-nav__link">
    Static files: collecting, storing and serving
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources" class="md-nav__link">
    Resources
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
  <h1>Docker Compose with NginX, Django, Gunicorn and multiple Postgres databases</h1>
  <p class="post-meta">
    Published Feb 01, 2018
    by Timothée Mazzucotelli
  </p>
  <p>This post explains how to setup your Docker configuration for a web application
based on the Django framework. I got a lot of inspiration from other tutorials
and Docker examples: you can check these resources with the links at the bottom
of the post. You can also directly check the
<a href="https://github.com/Pawamoy/docker-nginx-postgres-django-example">repository</a>
that reflects this tutorial.</p>
<!--more-->

<p>In this particular example, we will use Gunicorn, but it should be easy enough
to replace it with an alternative Python WSGI HTTP server such as uwsgi. We will
also make use of pipenv, with related Pipfile and Pipfile.lock, instead of plain
pip and requirements.txt files.</p>
<p>Here is the plan:</p>
<ol>
<li><a href="#overview-to-get-a-better-understanding-of-the-whole-thing">Overview: to get a better understanding of the whole thing</a></li>
<li><a href="#dockerfile-a-simple-django-application-served-by-gunicorn">Dockerfile: a simple Django application served by Gunicorn</a></li>
<li><a href="#pipenv-spice-things-up-with-pipfile-and-pipfilelock">Pipenv: spice things up with Pipfile and Pipfile.lock</a></li>
<li><a href="#compose-add-a-container-for-nginx">Compose: add a container for NginX</a></li>
<li><a href="#compose-add-containers-for-one-or-more-postgres-databases">Compose: add containers for one or more Postgres databases</a></li>
<li><a href="#static-files-collecting-storing-and-serving">Static files: collecting, storing and serving</a></li>
<li><a href="#resources">Resources</a></li>
</ol>
<p><a href="#__comments">Go to comments</a></p>
<h2 id="overview-to-get-a-better-understanding-of-the-whole-thing">Overview: to get a better understanding of the whole thing<a class="headerlink" href="#overview-to-get-a-better-understanding-of-the-whole-thing" title="Permanent link">¤</a></h2>
<p>So, let's start with some drawings in order to get a better idea of what we want
to accomplish, and how everything will fit together.</p>
<p>In this first, very simple image, you can see that we want three containers:
one for NginX, one for Django + Gunicorn (they always go together), and one for
our database. The NginX container communicate with the Django+Gunicorn one,
which itself connects to the Postgres container. Pretty straight-forward, right?</p>
<p><img alt="docker1" src="/assets/docker1.png" /></p>
<p>In our configuration, it means we will declare three containers, or three
services if we talk in terms of Docker Compose.</p>
<p>Except that we need bridges between the containers, in order for them to
communicate. Let's add these bridges:</p>
<p><img alt="docker2" src="/assets/docker2.png" /></p>
<p>In <code>docker-compose.yml</code>, we will declare these bridges thanks to the <code>networks</code>
directive, and connect them to the right containers.</p>
<p>Of course, you may want or need several databases for your project. So here is
an updated image with two database containers. It's simply a matter of adding
a new brige:</p>
<p><img alt="docker3" src="/assets/docker3.png" /></p>
<p>Once you know how to do it for two databases, it's very easy to add more.</p>
<p>Now, this is enough for local development. But each time you restart your
containers or services, the data in the Postgres databases will be lost. In
production, we need these data to be persistent. If we keep the data in
production, let's keep them in local environment as well. To do this, we will
use volumes, a feature of Docker:</p>
<p><img alt="docker4" src="/assets/docker4.png" /></p>
<p>Alright, that is enough for the overview, let's get our hands dirty!</p>
<h2 id="dockerfile-a-simple-django-application-served-by-gunicorn">Dockerfile: a simple Django application served by Gunicorn<a class="headerlink" href="#dockerfile-a-simple-django-application-served-by-gunicorn" title="Permanent link">¤</a></h2>
<p>If you don't already have a simple Django project available for testing,
I invite you to create one with <code>django-admin startproject hello</code>.</p>
<p>Here is the directory/file tree you should have in order to follow this
tutorial:</p>
<div class="highlight"><pre><span></span><code>.                         # Your current directory, created for this tutorial
└── hello                 # The Django project
    ├── hello             # The main Django app of your project
    │   ├── __init__.py
    │   ├── settings.py
    │   ├── urls.py
    │   └── wsgi.py
    └── manage.py
</code></pre></div>

<p>Now that you have a working Django project, you can run it by going into the
<code>hello</code> directory and type <code>./manage.py runserver</code>. Go to
<a href="http://localhost:8000">http://localhost:8000</a> to see the result.</p>
<p>Instead of running it with the Django <code>runserver</code> management command, let's try
with Gunicorn. First, install it with <code>pip install gunicorn</code>, be it in a
virtualenv or system-wide with <code>sudo pip install gunicorn</code>.</p>
<p>It's as easy as running <code>gunicorn --bind :8000 hello.wsgi:application</code> from
inside the Django project. If you are one directory above, use
<code>gunicorn --chdir hello --bind :8000 hello.wsgi:application</code>.</p>
<p>We have all we need to write our Dockerfile:</p>
<div class="highlight"><pre><span></span><code><span class="c"># start from an official image</span>
<span class="k">FROM</span> <span class="s">python:3.6</span>

<span class="c"># arbitrary location choice: you can change the directory</span>
<span class="k">RUN</span> mkdir -p /opt/services/djangoapp/src
<span class="k">WORKDIR</span><span class="s"> /opt/services/djangoapp/src</span>

<span class="c"># install our two dependencies</span>
<span class="k">RUN</span> pip install gunicorn django

<span class="c"># copy our project code</span>
<span class="k">COPY</span> . /opt/services/djangoapp/src

<span class="c"># expose the port 8000</span>
<span class="k">EXPOSE</span><span class="s"> 8000</span>

<span class="c"># define the default command to run when starting the container</span>
<span class="k">CMD</span> <span class="p">[</span><span class="s2">&quot;gunicorn&quot;</span><span class="p">,</span> <span class="s2">&quot;--chdir&quot;</span><span class="p">,</span> <span class="s2">&quot;hello&quot;</span><span class="p">,</span> <span class="s2">&quot;--bind&quot;</span><span class="p">,</span> <span class="s2">&quot;:8000&quot;</span><span class="p">,</span> <span class="s2">&quot;hello.wsgi:application&quot;</span><span class="p">]</span>
</code></pre></div>

<p>The Dockerfile must be placed at the root of your test directory. As a reminder:</p>
<div class="highlight"><pre><span></span><code>.                         # Your current directory, created for this tutorial
├── hello                 # The Django project
│   ├── hello             # The main Django app of your project
│   └── manage.py
└── Dockerfile            # Your Dockerfile
</code></pre></div>

<p>We are now able to build our container with <code>docker build . -t hello</code>, and to
start it with <code>docker run -p 8000:8000 hello</code>. The <code>-p 8000:8000</code> option says to
bind the port 8000 of the host to the port 8000 of the container, allowing you
to go to <a href="http://localhost:8000">http://localhost:8000</a> and see your application
running as if you were inside of the container.</p>
<h2 id="pipenv-spice-things-up-with-pipfile-and-pipfilelock">Pipenv: spice things up with Pipfile and Pipfile.lock<a class="headerlink" href="#pipenv-spice-things-up-with-pipfile-and-pipfilelock" title="Permanent link">¤</a></h2>
<p>This step is completely optional. If you prefer to use plain pip and
requirements files, you can skip this section.</p>
<p>First install pipenv with <code>pip install pipenv</code>, or system-wide with
<code>sudo pip install pipenv</code>.
Since we only need Django and Gunicorn, our Pipfile will be very simple:</p>
<div class="highlight"><pre><span></span><code><span class="k">[[source]]</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">&quot;https://pypi.python.org/simple&quot;</span>
<span class="n">verify_ssl</span> <span class="o">=</span> <span class="kc">true</span>
<span class="n">name</span> <span class="o">=</span> <span class="s">&quot;pypi&quot;</span>


<span class="k">[packages]</span>
<span class="n">Django</span> <span class="o">=</span> <span class="s">&quot;*&quot;</span>
<span class="n">gunicorn</span> <span class="o">=</span> <span class="s">&quot;*&quot;</span>


<span class="k">[requires]</span>
<span class="c1"># our Dockerfile is based on Python 3.6</span>
<span class="n">python_version</span> <span class="o">=</span> <span class="s">&quot;3.6&quot;</span>
</code></pre></div>

<p>Just like the Dockerfile, Pipfile must be placed at the root of the project.</p>
<div class="highlight"><pre><span></span><code>.
├── hello
│   ├── hello
│   └── manage.py
├── Dockerfile
└── Pipfile
</code></pre></div>

<p>Simply run <code>pipenv lock</code> to create Pipfile.lock from Pipfile.</p>
<p>Now we need to update our Dockerfile to use pipenv:</p>
<div class="highlight"><pre><span></span><code><span class="c"># start from an official image</span>
<span class="k">FROM</span> <span class="s">python:3.6</span>

<span class="c"># arbitrary location choice: you can change the directory</span>
<span class="k">RUN</span> mkdir -p /opt/services/djangoapp/src
<span class="k">WORKDIR</span><span class="s"> /opt/services/djangoapp/src</span>

<span class="c"># install our dependencies</span>
<span class="c"># we use --system flag because we don&#39;t need an extra virtualenv</span>
<span class="k">COPY</span> Pipfile Pipfile.lock /opt/services/djangoapp/src/
<span class="k">RUN</span> pip install pipenv <span class="o">&amp;&amp;</span> pipenv install --system

<span class="c"># copy our project code</span>
<span class="k">COPY</span> . /opt/services/djangoapp/src

<span class="c"># expose the port 8000</span>
<span class="k">EXPOSE</span><span class="s"> 8000</span>

<span class="c"># define the default command to run when starting the container</span>
<span class="k">CMD</span> <span class="p">[</span><span class="s2">&quot;gunicorn&quot;</span><span class="p">,</span> <span class="s2">&quot;--chdir&quot;</span><span class="p">,</span> <span class="s2">&quot;hello&quot;</span><span class="p">,</span> <span class="s2">&quot;--bind&quot;</span><span class="p">,</span> <span class="s2">&quot;:8000&quot;</span><span class="p">,</span> <span class="s2">&quot;hello.wsgi:application&quot;</span><span class="p">]</span>
</code></pre></div>

<p>You can rebuild the image with <code>docker build . -t hello</code> and try to run it again
to see if everything works correctly.</p>
<h2 id="compose-add-a-container-for-nginx">Compose: add a container for NginX<a class="headerlink" href="#compose-add-a-container-for-nginx" title="Permanent link">¤</a></h2>
<p>Since we will then have two containers, one for Django + Gunicorn, and one for
NginX, it's time to start our composition with Docker Compose and
<code>docker-compose.yml</code>. Create your <code>docker-compose.yml</code> file at the root of the
project, like following:</p>
<div class="highlight"><pre><span></span><code>.
├── hello
│   ├── hello
│   └── manage.py
├── docker-compose.yml
├── Dockerfile
└── Pipfile
</code></pre></div>

<p>We are gonna use the version 3 of the configuration syntax. First, we add
the Django+Gunicorn service:</p>
<div class="highlight"><pre><span></span><code><span class="nt">version</span><span class="p">:</span> <span class="s">&#39;3&#39;</span>

<span class="nt">services</span><span class="p">:</span>
  <span class="nt">djangoapp</span><span class="p">:</span>
    <span class="nt">build</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.</span>
    <span class="nt">volumes</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">.:/opt/services/djangoapp/src</span>
    <span class="nt">ports</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">8000:8000</span>
</code></pre></div>

<p>We simply tell Docker Compose that the <code>djangoapp</code> service must use an image
that is built from the current directory, therefore looking for our Dockerfile.
The <code>volumes</code> directive tells to bind the current directory of the host to the
<code>/opt/services/djangoapp/src</code> directory of the container. The changes in our
current directory will be reflected in real-time in the container directory.
And reciprocally, changes that occur in the container directory will occur
in our current directory as well.</p>
<p>Build and run the service with <code>docker-compose up</code>. The name of the image will
be automatically chosen by Docker Compose (it will be the name of the current
directory with <code>_djangoapp</code> appended).</p>
<p>Ok, let's add our NginX service now:</p>
<div class="highlight"><pre><span></span><code><span class="nt">version</span><span class="p">:</span> <span class="s">&#39;3&#39;</span>

<span class="nt">services</span><span class="p">:</span>

  <span class="nt">djangoapp</span><span class="p">:</span>
    <span class="nt">build</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.</span>
    <span class="nt">volumes</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">.:/opt/services/djangoapp/src</span>

  <span class="nt">nginx</span><span class="p">:</span>
    <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nginx:1.13</span>
    <span class="nt">ports</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">8000:80</span>
    <span class="nt">volumes</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">./config/nginx/conf.d:/etc/nginx/conf.d</span>
    <span class="nt">depends_on</span><span class="p">:</span>  <span class="c1"># &lt;-- wait for djangoapp to be &quot;ready&quot; before starting this service</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">djangoapp</span>
</code></pre></div>

<p>Note that we removed the <code>ports</code> directive from our <code>djangoapp</code> service. Indeed
we will not communicate directly with Gunicorn anymore, but with NginX. We still
want to access our app at <a href="http://localhost:8000">http://localhost:8000</a>, and
we want NginX to listen to the port 80 in the container, so we use
<code>ports: - 8000:80</code>.</p>
<p>Note: in a production environment, we would use <code>80:80</code> instead.</p>
<p>We also bind a local directory to the <code>/etc/nginx/conf.d</code> container directory.
Let's create it and see what's inside:</p>
<div class="highlight"><pre><span></span><code>mkdir -p config/nginx/conf.d
touch config/nginx/conf.d/local.conf
</code></pre></div>

<p>You should now have the following files and directories:</p>
<div class="highlight"><pre><span></span><code>.
├── config
│   └── nginx
│       └── conf.d
│           └── local.conf
├── docker-compose.yml
├── Dockerfile
├── hello
│   ├── hello
│   └── manage.py
├── Pipfile
└── Pipfile.lock
</code></pre></div>

<p>The <code>config/nginx/conf.d/local.conf</code> file contains our NginX configuration:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># first we declare our upstream server, which is our Gunicorn application</span>
<span class="k">upstream</span> <span class="s">hello_server</span> <span class="p">{</span>
    <span class="c1"># docker will automatically resolve this to the correct address</span>
    <span class="c1"># because we use the same name as the service: &quot;djangoapp&quot;</span>
    <span class="kn">server</span> <span class="n">djangoapp</span><span class="p">:</span><span class="mi">8000</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1"># now we declare our main server</span>
<span class="k">server</span> <span class="p">{</span>

    <span class="kn">listen</span> <span class="mi">80</span><span class="p">;</span>
    <span class="kn">server_name</span> <span class="s">localhost</span><span class="p">;</span>

    <span class="kn">location</span> <span class="s">/</span> <span class="p">{</span>
        <span class="c1"># everything is passed to Gunicorn</span>
        <span class="kn">proxy_pass</span> <span class="s">http://hello_server</span><span class="p">;</span>
        <span class="kn">proxy_set_header</span> <span class="s">X-Forwarded-For</span> <span class="nv">$proxy_add_x_forwarded_for</span><span class="p">;</span>
        <span class="kn">proxy_set_header</span> <span class="s">Host</span> <span class="nv">$host</span><span class="p">;</span>
        <span class="kn">proxy_redirect</span> <span class="no">off</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>But before we try this out, remember that we need a bridge to make our services
able to communicate?</p>
<p>Update your <code>docker-compose.yml</code> as follow:</p>
<div class="highlight"><pre><span></span><code><span class="nt">version</span><span class="p">:</span> <span class="s">&#39;3&#39;</span>

<span class="nt">services</span><span class="p">:</span>

  <span class="nt">djangoapp</span><span class="p">:</span>
    <span class="nt">build</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.</span>
    <span class="nt">volumes</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">.:/opt/services/djangoapp/src</span>
    <span class="nt">networks</span><span class="p">:</span>  <span class="c1"># &lt;-- here</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">nginx_network</span>

  <span class="nt">nginx</span><span class="p">:</span>
    <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nginx:1.13</span>
    <span class="nt">ports</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">8000:80</span>
    <span class="nt">volumes</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">./config/nginx/conf.d:/etc/nginx/conf.d</span>
    <span class="nt">depends_on</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">djangoapp</span>
    <span class="nt">networks</span><span class="p">:</span>  <span class="c1"># &lt;-- here</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">nginx_network</span>

<span class="nt">networks</span><span class="p">:</span>  <span class="c1"># &lt;-- and here</span>
  <span class="nt">nginx_network</span><span class="p">:</span>
    <span class="nt">driver</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">bridge</span>
</code></pre></div>

<p>Run <code>docker-compose up</code> and see if you can still see the Django default page
at <a href="http://localhost:8000">http://localhost:8000</a>.</p>
<h2 id="compose-add-containers-for-one-or-more-postgres-databases">Compose: add containers for one or more Postgres databases<a class="headerlink" href="#compose-add-containers-for-one-or-more-postgres-databases" title="Permanent link">¤</a></h2>
<p>We now want to use Postgres instead of the starting default SQLite database.
We will need to update several things: our Pipfile, because we need the
<code>psycopg2</code> Python package, the Postgres driver; our Django project settings; and
our <code>docker-compose.yml</code> file.</p>
<ul>
<li>Pipfile becomes:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="k">[[source]]</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">&quot;https://pypi.python.org/simple&quot;</span>
<span class="n">verify_ssl</span> <span class="o">=</span> <span class="kc">true</span>
<span class="n">name</span> <span class="o">=</span> <span class="s">&quot;pypi&quot;</span>


<span class="k">[packages]</span>
<span class="n">Django</span> <span class="o">=</span> <span class="s">&quot;*&quot;</span>
<span class="n">gunicorn</span> <span class="o">=</span> <span class="s">&quot;*&quot;</span>
<span class="s">&quot;psycopg2&quot;</span> <span class="o">=</span> <span class="s">&quot;*&quot;</span>


<span class="k">[requires]</span>
<span class="c1"># our Dockerfile is based on Python 3.6</span>
<span class="n">python_version</span> <span class="o">=</span> <span class="s">&quot;3.6&quot;</span>
</code></pre></div>

<p>Don't forget to run <code>pipenv lock</code> to update your lock file, and rebuild your
  Docker image with <code>docker-compose build</code>.</p>
<ul>
<li>In the Django project settings, update the DATABASE setting from:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;ENGINE&#39;</span><span class="p">:</span> <span class="s1">&#39;django.db.backends.sqlite3&#39;</span><span class="p">,</span>
        <span class="s1">&#39;NAME&#39;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">,</span> <span class="s1">&#39;db.sqlite3&#39;</span><span class="p">),</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>...to:</p>
<div class="highlight"><pre><span></span><code><span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;ENGINE&#39;</span><span class="p">:</span> <span class="s1">&#39;django.db.backends.postgresql_psycopg2&#39;</span><span class="p">,</span>
        <span class="s1">&#39;NAME&#39;</span><span class="p">:</span> <span class="s1">&#39;database1&#39;</span><span class="p">,</span>
        <span class="s1">&#39;USER&#39;</span><span class="p">:</span> <span class="s1">&#39;database1_role&#39;</span><span class="p">,</span>
        <span class="s1">&#39;PASSWORD&#39;</span><span class="p">:</span> <span class="s1">&#39;database1_password&#39;</span><span class="p">,</span>
        <span class="s1">&#39;HOST&#39;</span><span class="p">:</span> <span class="s1">&#39;database1&#39;</span><span class="p">,</span>  <span class="c1"># &lt;-- IMPORTANT: same name as docker-compose service!</span>
        <span class="s1">&#39;PORT&#39;</span><span class="p">:</span> <span class="s1">&#39;5432&#39;</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>As you can see, we used <code>database1</code> everywhere, for the name, user, password
  and host. In fact, we can change these values to whatever suits us. But we
  must ensure the database container will use the same values! To do that, we
  will copy these values in a configuration file destined to be read by our
  database container.</p>
<p>Create a <code>db</code> directory in the <code>config</code> one, and add the <code>database1_env</code> file:</p>
<div class="highlight"><pre><span></span><code>mkdir config/db
touch config/db/database1_env
</code></pre></div>

<p>The contents of <code>config/db/database1_env</code> must then be:</p>
<div class="highlight"><pre><span></span><code>POSTGRES_USER=database1_role
POSTGRES_PASSWORD=database1_password
POSTGRES_DB=database1
</code></pre></div>

<p>These variable are used by the Postgres Docker image, for more information
  please check out the documentation on
  <a href="https://docs.docker.com/samples/library/postgres/#postgres_user">docs.docker.com</a>
  or <a href="https://hub.docker.com/_/postgres/">hub.docker.com</a>.</p>
<p>It means that, when started, the Postgres container will create a database
  called <code>database1</code>, assigned to the role <code>database1_role</code> with password
  <code>database1_password</code>. If you change these values, remember to also change them
  in the DATABASES setting.</p>
<ul>
<li>We are now ready to add our service in <code>docker-compose.yml</code>. <strong>The added
  service must have the same name than what is declared in the DATABASES
  setting:</strong></li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nt">version</span><span class="p">:</span> <span class="s">&#39;3&#39;</span>

<span class="nt">services</span><span class="p">:</span>

  <span class="nt">djangoapp</span><span class="p">:</span>
    <span class="nt">build</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.</span>
    <span class="nt">volumes</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">.:/opt/services/djangoapp/src</span>
    <span class="nt">networks</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">nginx_network</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">database1_network</span>  <span class="c1"># &lt;-- connect to the bridge</span>
    <span class="nt">depends_on</span><span class="p">:</span>  <span class="c1"># &lt;-- wait for db to be &quot;ready&quot; before starting the app</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">database1</span>

  <span class="nt">nginx</span><span class="p">:</span>
    <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nginx:1.13</span>
    <span class="nt">ports</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">8000:80</span>
    <span class="nt">volumes</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">./config/nginx/conf.d:/etc/nginx/conf.d</span>
    <span class="nt">depends_on</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">djangoapp</span>
    <span class="nt">networks</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">nginx_network</span>

  <span class="nt">database1</span><span class="p">:</span>  <span class="c1"># &lt;-- IMPORTANT: same name as in DATABASES setting, otherwise Django won&#39;t find the database!</span>
    <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">postgres:10</span>
    <span class="nt">env_file</span><span class="p">:</span>  <span class="c1"># &lt;-- we use the previously defined values</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">config/db/database1_env</span>
    <span class="nt">networks</span><span class="p">:</span>  <span class="c1"># &lt;-- connect to the bridge</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">database1_network</span>
    <span class="nt">volumes</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">database1_volume:/var/lib/postgresql/data</span>

<span class="nt">networks</span><span class="p">:</span>
  <span class="nt">nginx_network</span><span class="p">:</span>
    <span class="nt">driver</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">bridge</span>
  <span class="nt">database1_network</span><span class="p">:</span>  <span class="c1"># &lt;-- add the bridge</span>
    <span class="nt">driver</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">bridge</span>

<span class="nt">volumes</span><span class="p">:</span>
  <span class="nt">database1_volume</span><span class="p">:</span>
</code></pre></div>

<p>You should be able to understand everything here. However, we added two new
  things: the <code>database1: volumes:</code> directive, and the root <code>volumes:</code>
  directive. You need to declare your volumes in the root <code>volumes:</code> directive
  if you want them to be kept persistently. Then, you can bind a volume to a
  directory in the container. Here, we bind our declared <code>database1_volume</code> to
  the <code>database1</code> container's <code>/var/lib/postgresql/data</code> directory. Everything
  added to this directory will be persistently stored in the volume called
  <code>database1_volume</code>. So each subsequent run of the container will have access
  to the previous data! It means you can stop and restart your service without
  losing the data.</p>
<p>OK, let's try it. As we are using Django, we need to "migrate" the database
first. To do this, we will simply use Docker Compose to start our <code>djangoapp</code>
service and run the migration command inside it:</p>
<div class="highlight"><pre><span></span><code>docker-compose build  <span class="c1"># to make sure everything is up-to-date</span>
docker-compose run --rm djangoapp /bin/bash -c <span class="s2">&quot;cd hello; ./manage.py migrate&quot;</span>
</code></pre></div>

<p>From now on, it should be really easy to add other databases: just add other
database services (<code>database2</code>) with their networks volumes (remember to
connect the networks and bind the volumes), update your DATABASES setting in
the Django project, and create the environment file for each database in
<code>config/db</code>.</p>
<h2 id="static-files-collecting-storing-and-serving">Static files: collecting, storing and serving<a class="headerlink" href="#static-files-collecting-storing-and-serving" title="Permanent link">¤</a></h2>
<p><strong>UPDATE</strong>: a lot of us (including myself) seem to have trouble updating
the static files in the designated Docker volume. In retrospect,
collecting the static files in the Dockerfile might not be a good idea,
because of the caching mechanisms of Docker. A simple and effective solution,
mentioned by Isaac T Chikutukutu in the comments, is to remove this command
from the Dockerfile and manually run it when needed:
<code>docker-compose run djangoapp hello/manage.py collectstatic --no-input</code></p>
<p>I edited the rest of the post accordingly.</p>
<p><strong>(End of update)</strong></p>
<p>Let's not forget about the static files! In order for NginX to serve them,
we will update the <code>config/nginx/conf.d/local.conf</code> file, as well as our
<code>docker-compose.yml</code> file. Static files will be stored in volumes.
We also need to set the <code>STATIC_ROOT</code> and <code>MEDIA_ROOT</code> variables
in the Django project settings.</p>
<ul>
<li>NginX configuration:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="k">upstream</span> <span class="s">hello_server</span> <span class="p">{</span>
    <span class="kn">server</span> <span class="n">djangoapp</span><span class="p">:</span><span class="mi">8000</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">server</span> <span class="p">{</span>

    <span class="kn">listen</span> <span class="mi">80</span><span class="p">;</span>
    <span class="kn">server_name</span> <span class="s">localhost</span><span class="p">;</span>

    <span class="kn">location</span> <span class="s">/</span> <span class="p">{</span>
        <span class="kn">proxy_pass</span> <span class="s">http://hello_server</span><span class="p">;</span>
        <span class="kn">proxy_set_header</span> <span class="s">X-Forwarded-For</span> <span class="nv">$proxy_add_x_forwarded_for</span><span class="p">;</span>
        <span class="kn">proxy_set_header</span> <span class="s">Host</span> <span class="nv">$host</span><span class="p">;</span>
        <span class="kn">proxy_redirect</span> <span class="no">off</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kn">location</span> <span class="s">/static/</span> <span class="p">{</span>
        <span class="kn">alias</span> <span class="s">/opt/services/djangoapp/static/</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kn">location</span> <span class="s">/media/</span> <span class="p">{</span>
        <span class="kn">alias</span> <span class="s">/opt/services/djangoapp/media/</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<ul>
<li>Django project settings:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="c1"># as declared in NginX conf, it must match /opt/services/djangoapp/static/</span>
<span class="n">STATIC_ROOT</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">)),</span> <span class="s1">&#39;static&#39;</span><span class="p">)</span>

<span class="c1"># do the same for media files, it must match /opt/services/djangoapp/media/</span>
<span class="n">MEDIA_ROOT</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">BASE_DIR</span><span class="p">)),</span> <span class="s1">&#39;media&#39;</span><span class="p">)</span>
</code></pre></div>

<ul>
<li>Volumes in <code>docker-compose.yml</code>:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nt">version</span><span class="p">:</span> <span class="s">&#39;3&#39;</span>

<span class="nt">services</span><span class="p">:</span>

  <span class="nt">djangoapp</span><span class="p">:</span>
    <span class="nt">build</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.</span>
    <span class="nt">volumes</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">.:/opt/services/djangoapp/src</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">static_volume:/opt/services/djangoapp/static</span>  <span class="c1"># &lt;-- bind the static volume</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">media_volume:/opt/services/djangoapp/media</span>  <span class="c1"># &lt;-- bind the media volume</span>
    <span class="nt">networks</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">nginx_network</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">database1_network</span>
    <span class="nt">depends_on</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">database1</span>

  <span class="nt">nginx</span><span class="p">:</span>
    <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nginx:1.13</span>
    <span class="nt">ports</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">8000:80</span>
    <span class="nt">volumes</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">./config/nginx/conf.d:/etc/nginx/conf.d</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">static_volume:/opt/services/djangoapp/static</span>  <span class="c1"># &lt;-- bind the static volume</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">media_volume:/opt/services/djangoapp/media</span>  <span class="c1"># &lt;-- bind the media volume</span>
    <span class="nt">depends_on</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">djangoapp</span>
    <span class="nt">networks</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">nginx_network</span>

  <span class="nt">database1</span><span class="p">:</span>
    <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">postgres:10</span>
    <span class="nt">env_file</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">config/db/database1_env</span>
    <span class="nt">networks</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">database1_network</span>
    <span class="nt">volumes</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">database1_volume:/var/lib/postgresql/data</span>

<span class="nt">networks</span><span class="p">:</span>
  <span class="nt">nginx_network</span><span class="p">:</span>
    <span class="nt">driver</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">bridge</span>
  <span class="nt">database1_network</span><span class="p">:</span>
    <span class="nt">driver</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">bridge</span>

<span class="nt">volumes</span><span class="p">:</span>
  <span class="nt">database1_volume</span><span class="p">:</span>
  <span class="nt">static_volume</span><span class="p">:</span>  <span class="c1"># &lt;-- declare the static volume</span>
  <span class="nt">media_volume</span><span class="p">:</span>  <span class="c1"># &lt;-- declare the media volume</span>
</code></pre></div>

<ul>
<li>And finally, collect the static files each time you need to update them, by running:</li>
</ul>
<div class="highlight"><pre><span></span><code>docker-compose run djangoapp hello/manage.py collectstatic --no-input
</code></pre></div>

<h2 id="resources">Resources<a class="headerlink" href="#resources" title="Permanent link">¤</a></h2>
<p>Here are the resources I used to write this tutorial:</p>
<ul>
<li><a href="http://www.ameyalokare.com/docker/2017/09/20/nginx-flask-postgres-docker-compose.html">Nginx+Flask+Postgres multi-container setup with Docker Compose</a></li>
<li><a href="https://github.com/juggernaut/nginx-flask-postgres-docker-compose-example">The repository</a></li>
<li><a href="https://serverfault.com/questions/783806/docker-how-to-django-uwsgi-gunicorn-nginx/787402">Docker how to Django + uwsgi/gunicorn + nginx?</a></li>
<li><a href="https://github.com/andrecp/django-tutorial-docker-nginx-postgres">Django tutorial using Docker, Nginx, Gunicorn and PostgreSQL.</a></li>
<li><a href="https://github.com/realpython/dockerizing-django">Django Development With Docker Compose and Machine</a></li>
<li><a href="http://ruddra.com/2016/08/14/docker-django-nginx-postgres/index.html">Deploy Django, Gunicorn, NGINX, Postgresql using Docker</a></li>
<li><a href="https://stackoverflow.com/questions/32180589/docker-how-to-expose-a-socket-over-a-port-for-a-django-application">Docker, how to expose a socket over a port for a Django Application</a></li>
</ul>
<p>And here is the
<a href="https://github.com/Pawamoy/docker-nginx-postgres-django-example">repository</a>
that reflects this tutorial (with a few more things).</p>
<p>Don't hesitate to share other interesting resources in the comment section!</p>

              
  <hr>
  <script src="https://utteranc.es/client.js"
          repo="pawamoy/pawamoy.github.io"
          issue-term="pathname"
          theme="preferred-color-scheme"
          crossorigin="anonymous"
          async>
  </script>

            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../dual-screens-setup-nvidia-bunsenlabs-debian-jessie/" title="How to install NVidia drivers on BunsenLabs/Debian 8 to setup dual screens" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                How to install NVidia drivers on BunsenLabs/Debian 8 to setup dual screens
              </div>
            </div>
          </a>
        
        
          <a href="../python-static-code-analysis-tools/" title="Python static code analysis tools" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Python static code analysis tools
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://github.com/pawamoy" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://twitter.com/pawamoy" target="_blank" rel="noopener" title="twitter.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://linkedin.com/in/timothée-mazzucotelli-0321607b/" target="_blank" rel="noopener" title="linkedin.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://instagram.com/paaawamoy" target="_blank" rel="noopener" title="instagram.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.3636a4ec.min.js"></script>
      <script src="../../assets/javascripts/bundle.e9fe3281.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: ["tabs"],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>